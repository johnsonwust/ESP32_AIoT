"use strict";(self.webpackChunkesp_32_s_3_aiot_starter_kit=self.webpackChunkesp_32_s_3_aiot_starter_kit||[]).push([[2606],{5004:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"example/intermediate/ina219-code","title":"ina219-code","description":"","source":"@site/docs/example/intermediate/ina219-code.mdx","sourceDirName":"example/intermediate","slug":"/example/intermediate/ina219-code","permalink":"/docs/example/intermediate/ina219-code","draft":false,"unlisted":false,"editUrl":"https://github.com/johnsonwust/ESP32_AIoT/tree/gh-pages/docs/example/intermediate/ina219-code.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"exampleSidebar","previous":{"title":"\u539f\u7406","permalink":"/docs/example/intermediate/tb6612-principle"},"next":{"title":"\u539f\u7406","permalink":"/docs/example/intermediate/ina219-principle"}}');var i=r(4848),a=r(8453);const o={},l=void 0,s={},p=[];function c(e){const n={code:"code",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:'\r\n//#include <Wire.h>\r\n#include <Adafruit_INA219.h>\r\n\r\n// \u521b\u5efa INA219 \u5bf9\u8c61\r\nAdafruit_INA219 ina219;\r\n\r\n// \u914d\u7f6e I2C \u5f15\u811a\r\n#define SDA_PIN 4  // ESP32-S3 \u7684\u9ed8\u8ba4 SDA \u5f15\u811a\uff08\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\uff09\r\n#define SCL_PIN 5  // ESP32-S3 \u7684\u9ed8\u8ba4 SCL \u5f15\u811a\uff08\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\uff09\r\n\r\nvoid setup() {\r\n  // \u521d\u59cb\u5316\u4e32\u53e3\u901a\u4fe1\r\n  Serial.begin(115200);\r\n  delay(2000);  // \u7ed9\u4e32\u53e3\u4e00\u4e9b\u65f6\u95f4\u6765\u542f\u52a8\r\n\r\n  // \u521d\u59cb\u5316 I2C \u901a\u4fe1\uff0c\u6307\u5b9a SDA \u548c SCL \u5f15\u811a\r\n  Wire.begin(SDA_PIN, SCL_PIN);\r\n\r\n  // \u521d\u59cb\u5316 INA219 \u4f20\u611f\u5668\r\n  if (!ina219.begin()) {\r\n    Serial.println("\u65e0\u6cd5\u627e\u5230 INA219 \u4f20\u611f\u5668\uff01");\r\n    while (1);\r\n  }\r\n\r\n  // \u8f93\u51fa\u521d\u59cb\u5316\u5b8c\u6210\u7684\u63d0\u793a\r\n  Serial.println("INA219 \u521d\u59cb\u5316\u5b8c\u6210\uff01");\r\n}\r\n\r\nvoid loop() {\r\n  // \u8bfb\u53d6\u603b\u7ebf\u7535\u538b\u3001\u7535\u6d41\u548c\u529f\u7387\r\n  float busVoltage = ina219.getBusVoltage_V();    // \u603b\u7ebf\u7535\u538b\uff08\u4f0f\u7279\uff09\r\n  float shuntVoltage = ina219.getShuntVoltage_mV(); // \u5206\u6d41\u7535\u538b\uff08\u6beb\u4f0f\uff09\r\n  float current = ina219.getCurrent_mA();          // \u7535\u6d41\uff08\u6beb\u5b89\uff09\r\n  float power = ina219.getPower_mW();              // \u529f\u7387\uff08\u6beb\u74e6\uff09\r\n\r\n  // \u6253\u5370\u8bfb\u53d6\u7684\u6570\u636e\r\n  Serial.print("\u603b\u7ebf\u7535\u538b: "); Serial.print(busVoltage); Serial.println(" V");\r\n  Serial.print("\u5206\u6d41\u7535\u538b: "); Serial.print(shuntVoltage); Serial.println(" mV");\r\n  Serial.print("\u7535\u6d41: "); Serial.print(current); Serial.println(" mA");\r\n  Serial.print("\u529f\u7387: "); Serial.print(power); Serial.println(" mW");\r\n\r\n  // \u6bcf\u79d2\u66f4\u65b0\u4e00\u6b21\u6570\u636e\r\n  delay(1000);\r\n}\r\naaaaa\r\n\n'})})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var t=r(6540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);