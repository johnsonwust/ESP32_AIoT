"use strict";(self.webpackChunkesp_32_s_3_aiot_starter_kit=self.webpackChunkesp_32_s_3_aiot_starter_kit||[]).push([[6599],{8687:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"example/easy/button-code","title":"button-code","description":"alt text","source":"@site/docs/example/easy/button-code.md","sourceDirName":"example/easy","slug":"/example/easy/button-code","permalink":"/docs/example/easy/button-code","draft":false,"unlisted":false,"editUrl":"https://github.com/johnsonwust/ESP32_AIoT/tree/gh-pages/docs/example/easy/button-code.md","tags":[],"version":"current","frontMatter":{},"sidebar":"exampleSidebar","previous":{"title":"\u539f\u7406","permalink":"/docs/example/easy/led-principle"},"next":{"title":"\u539f\u7406","permalink":"/docs/example/easy/button-principle"}}');var o=t(4848),s=t(8453);const a={},i=void 0,u={},c=[];function l(n){const e={code:"code",img:"img",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{alt:"alt text",src:t(1245).A+"",width:"2160",height:"2051"})}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{alt:"alt text",src:t(3570).A+"",width:"2160",height:"2051"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-cpp",children:'\r\n#include <U8g2lib.h>\r\n#include <Wire.h>\r\n\r\n// \u4f7f\u7528\u8f6f\u4ef6 I2C \u6784\u9020\u51fd\u6570\uff0c\u6307\u5b9a SCL \u4e3a GPIO5\u3001SDA \u4e3a GPIO4\uff0c\u590d\u4f4d\u5f15\u811a\u672a\u4f7f\u7528\r\nU8G2_SSD1306_128X64_NONAME_F_SW_I2C u8g2(U8G2_R0, 43, 44, U8X8_PIN_NONE);\r\n\r\n// \u5b9a\u4e49\u7535\u4f4d\u5668\u8fde\u63a5\u7684 ADC \u5f15\u811a\uff08IO13\uff09\r\nconst int potPin = 13;\r\n\r\nvoid setup(){\r\n  Serial.begin(115200);\r\n  \r\n  // \u8bbe\u7f6e OLED \u663e\u793a\u5c4f\u7684 I2C \u5730\u5740\uff080x3C \u5de6\u79fb\u4e00\u4f4d\uff09\r\n  u8g2.setI2CAddress(0x3C * 2);\r\n  u8g2.begin();\r\n  // \u542f\u7528 UTF8 \u652f\u6301\uff0c\u786e\u4fdd\u4e2d\u6587\u80fd\u6b63\u786e\u663e\u793a\r\n  u8g2.enableUTF8Print();\r\n  \r\n  // \u53ef\u9009\uff1a\u8bbe\u7f6e ADC \u8bfb\u53d6\u5206\u8fa8\u7387\u4e3a 12 \u4f4d\uff08ESP32 \u9ed8\u8ba4\u5373\u4e3a 12 \u4f4d\uff09\r\n  analogReadResolution(12);\r\n}\r\n\r\nvoid loop(){\r\n  // \u4ece\u7535\u4f4d\u5668\u5bf9\u5e94\u7684\u5f15\u811a\u8bfb\u53d6 ADC \u6570\u503c\uff0c\u8303\u56f4 0~4095\r\n  int adcValue = analogRead(potPin);\r\n  \r\n  // \u5c06 ADC \u6570\u503c\u8f6c\u6362\u4e3a\u7535\u538b\u503c\uff1a0\uff5e4095 \u5bf9\u5e94 0\uff5e3.3V\r\n  float voltage = adcValue * (3.3 / 4095.0);\r\n  \r\n  // \u5c06 ADC \u6570\u503c\u6620\u5c04\u5230 0\uff5e270 \u5ea6\u8303\u56f4\r\n  float angle = (adcValue * 270.0) / 4095.0;\r\n  \r\n  // \u5f00\u59cb\u5206\u5757\u7ed8\u56fe\uff0c\u9010\u9875\u66f4\u65b0\u663e\u793a\u5185\u5bb9\r\n  u8g2.firstPage();\r\n  do {\r\n    // \u7b2c\u4e00\u884c\uff1a\u663e\u793a\u7535\u4f4d\u5668 ADC \u6570\u503c\uff08\u4f7f\u7528\u652f\u6301\u4e2d\u6587\u7684 12 \u70b9\u5b57\u4f53\uff09\r\n    u8g2.setFont(u8g2_font_wqy12_t_gb2312);\r\n    u8g2.setFontPosTop();\r\n    u8g2.setCursor(0, 4);\r\n    u8g2.print("\u6a21\u62df\u91cf\u6570\u503c: ");\r\n    u8g2.print(adcValue);\r\n    \r\n    // \u7b2c\u4e8c\u884c\uff1a\u663e\u793a\u7535\u538b\u503c\uff08\u4f7f\u7528\u652f\u6301\u4e2d\u6587\u7684 16 \u70b9\u5b57\u4f53\uff09\r\n    u8g2.setFont(u8g2_font_wqy16_t_gb2312);\r\n    u8g2.setCursor(0, 24);\r\n    u8g2.print("\u7535\u538b: ");\r\n    u8g2.print(voltage, 2);  // \u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\r\n    u8g2.print("V");\r\n    \r\n    // \u7b2c\u4e09\u884c\uff1a\u663e\u793a\u5bf9\u5e94\u7684\u89d2\u5ea6\uff08\u4f7f\u7528\u652f\u6301\u4e2d\u6587\u7684 16 \u70b9\u5b57\u4f53\uff09\r\n    u8g2.setCursor(0, 44);\r\n    u8g2.print("\u89d2\u5ea6: ");\r\n    u8g2.print(angle, 1);    // \u4fdd\u7559\u4e00\u4f4d\u5c0f\u6570\r\n    u8g2.print("\xb0");\r\n    \r\n  } while(u8g2.nextPage());\r\n  \r\n  // \u5ef6\u65f6 5 \u6beb\u79d2\uff0c\u964d\u4f4e\u5237\u65b0\u9891\u7387\uff0c\u4fbf\u4e8e\u89c2\u5bdf\u6570\u503c\u53d8\u5316\r\n  delay(5);\r\n}\r\n\n'})})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},3570:(n,e,t)=>{t.d(e,{A:()=>r});const r=t.p+"assets/images/button_down-9bc5d549ac3e1b85e422a901a3d55615.png"},1245:(n,e,t)=>{t.d(e,{A:()=>r});const r=t.p+"assets/images/button_up-070bb7a2088bf00f4df7a703f61b5db4.png"},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>i});var r=t(6540);const o={},s=r.createContext(o);function a(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);